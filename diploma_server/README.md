# Документация API

Этот документ описывает доступные API-эндпоинты для приложения словаря. API построен с использованием Django REST Framework и предоставляет эндпоинты для управления словами, переводами, избранными словами, коллекциями и языками.

## Базовый URL
Все эндпоинты относятся к базовому URL вашего API. Например, если ваш API размещен по адресу `http://127.0.0.1:8000`, то полный URL для `DictionaryViewSet` будет `http://127.0.0.1:8000/api/dictionary/`.

## Аутентификация
Все эндпоинты, кроме регистрации и получения токенов, требуют аутентификации. Убедитесь, что пользователь авторизован перед выполнением запросов к этим эндпоинтам. Для аутентификации используется JWT (JSON Web Token).

## Эндпоинты

### Аутентификация

#### Регистрация пользователя
- **URL:** `/api/register/`
- **Метод:** `POST`
- **Описание:** Зарегистрировать нового пользователя.
- **Тело запроса:**
  - `username`: Имя пользователя (обязательно).
  - `email`: Электронная почта (обязательно, уникальное значение).
  - `password`: Пароль (обязательно).
  - `language`: ID языка по умолчанию (опционально).
- **Ответ:** JSON с данными пользователя (без пароля) и статусом `201 Created`.

#### Получение токена доступа
- **URL:** `/api/token/`
- **Метод:** `POST`
- **Описание:** Получить JWT-токен для аутентификации.
- **Тело запроса:**
  - `username`: Имя пользователя.
  - `password`: Пароль.
- **Ответ:** JSON с `access` и `refresh` токенами.

#### Обновление токена доступа
- **URL:** `/api/token/refresh/`
- **Метод:** `POST`
- **Описание:** Обновить JWT-токен доступа.
- **Тело запроса:**
  - `refresh`: Refresh-токен.
- **Ответ:** JSON с новым `access` токеном.

### Языки

#### Получить список языков
- **URL:** `/api/languages/`
- **Метод:** `GET`
- **Описание:** Получить список всех доступных языков.
- **Ответ:** Список объектов `Language` с полями `id`, `name` и `flag`.

#### Обновить язык пользователя
- **URL:** `/api/user/language/`
- **Метод:** `PUT`
- **Описание:** Обновить язык по умолчанию для текущего пользователя.
- **Тело запроса:**
  - `language_id`: ID нового языка.
- **Ответ:** JSON с сообщением `{'status': 'Язык пользователя обновлён'}`.

### Пользователи

#### Модель пользователя
Пользовательская модель `User` расширяет стандартную модель `AbstractUser` и включает следующие поля:
- `username`: Имя пользователя.
- `email`: Электронная почта (уникальное значение).
- `password`: Пароль (хранится в зашифрованном виде).
- `language`: Внешний ключ на модель `Language` (язык по умолчанию для пользователя).

### Переводы слов

#### Получить все переводы
- **URL:** `/api/dictionary/`
- **Метод:** `GET`
- **Описание:** Получить список всех переводов, отфильтрованных по языку пользователя.
- **Параметры запроса:**
  - `word__category`: Фильтр по ID категории.
  - `word__part_of_speech`: Фильтр по ID части речи.
  - `search`: Поиск по тексту перевода или тексту слова.
- **Ответ:** Список объектов `Translation`.

#### Получить один перевод
- **URL:** `/api/dictionary/{id}/`
- **Метод:** `GET`
- **Описание:** Получить один перевод по его ID.
- **Ответ:** Один объект `Translation`.

### Избранные слова

#### Получить все избранные слова
- **URL:** `/api/favoriteWords/`
- **Метод:** `GET`
- **Описание:** Получить список всех избранных слов для авторизованного пользователя.
- **Ответ:** Список объектов `FavoriteWord`.

#### Добавить слово в избранное
- **URL:** `/api/favoriteWords/`
- **Метод:** `POST`
- **Описание:** Добавить слово в избранное пользователя.
- **Тело запроса:**
  - `translation`: ID перевода для добавления в избранное.
- **Ответ:** Созданный объект `FavoriteWord`.

#### Удалить слово из избранного
- **URL:** `/api/favoriteWords/{id}/`
- **Метод:** `DELETE`
- **Описание:** Удалить слово из избранного пользователя.
- **Ответ:** HTTP 204 No Content.

#### Проверить, есть ли слово в избранном
- **URL:** `/api/favoriteWords/check-favorite/`
- **Метод:** `GET`
- **Описание:** Проверить, есть ли конкретный перевод в избранном у пользователя.
- **Параметры запроса:**
  - `translation_id`: ID перевода для проверки.
- **Ответ:** JSON-объект с полем `is_favorite` (булево значение).

### Коллекции

#### Получить все коллекции
- **URL:** `/api/collections/`
- **Метод:** `GET`
- **Описание:** Получить список всех коллекций для авторизованного пользователя.
- **Ответ:** Список объектов `Collection`.

#### Создать новую коллекцию
- **URL:** `/api/collections/`
- **Метод:** `POST`
- **Описание:** Создать новую коллекцию.
- **Тело запроса:**
  - `name`: Название коллекции.
  - `description`: Описание коллекции.
  - `language`: ID языка, связанного с коллекцией.
  - `is_public`: Булево значение, указывающее, является ли коллекция публичной.
- **Ответ:** Созданный объект `Collection`.

#### Получить одну коллекцию
- **URL:** `/api/collections/{id}/`
- **Метод:** `GET`
- **Описание:** Получить одну коллекцию по её ID.
- **Ответ:** Один объект `Collection`.

#### Обновить коллекцию
- **URL:** `/api/collections/{id}/`
- **Метод:** `PUT` или `PATCH`
- **Описание:** Обновить существующую коллекцию.
- **Тело запроса:** Поля для обновления.
- **Ответ:** Обновленный объект `Collection`.

#### Удалить коллекцию
- **URL:** `/api/collections/{id}/`
- **Метод:** `DELETE`
- **Описание:** Удалить коллекцию.
- **Ответ:** HTTP 204 No Content.

#### Переключить публичный статус коллекции
- **URL:** `/api/collections/{id}/toggle_public_status/`
- **Метод:** `POST`
- **Описание:** Переключить публичный статус коллекции.
- **Ответ:** JSON-объект с полями `status` и `is_public`.

#### Добавить слово в коллекцию
- **URL:** `/api/collections/{id}/add_word/`
- **Метод:** `POST`
- **Описание:** Добавить слово (перевод) в коллекцию.
- **Тело запроса:**
  - `translation_id`: ID перевода для добавления в коллекцию.
- **Ответ:** Созданный объект `WordInCollection`.

### Удалить слово из коллекции
- **URL:** `/api/collections/{id}/remove_word/`
- **Метод:** `DELETE`
- **Описание:** Удалить слово (перевод) из коллекции.
- **Параметры запроса:**
  - `translation_id`: ID перевода, который нужно удалить из коллекции.
- **Ответ:**
  - Успех: HTTP 204 No Content с сообщением `{"status": "Слово удалено из коллекции."}`.
  - Ошибка:
    - `400 Bad Request`: Если `translation_id` не указан.
    - `404 Not Found`: Если слово не найдено в коллекции.

#### Получить слова в коллекции
- **URL:** `/api/collections/{id}/words/`
- **Метод:** `GET`
- **Описание:** Получить список всех слов в конкретной коллекции.
- **Ответ:** Список объектов `WordInCollection`.

#### Получить публичные коллекции
- **URL:** `/api/collections/public-collections/`
- **Метод:** `GET`
- **Описание:** Получить список всех публичных коллекций.
- **Ответ:** Список объектов `Collection`.

### Книги

#### Получить все книги
- **URL:** `/api/library/`
- **Метод:** `GET`
- **Описание:** Получить список всех книг, отфильтрованных по языку пользователя.
- **Ответ:** Список объектов `Book` с полями `id`, `title`, `author`, `language` и `logo`.

#### Получить одну книгу
- **URL:** `/api/library/{id}/`
- **Метод:** `GET`
- **Описание:** Получить одну книгу по её ID.
- **Ответ:** Один объект `Book`.

#### Получить предложения книги
- **URL:** `/api/library/{id}/sentences/`
- **Метод:** `GET`
- **Описание:** Получить список всех предложений для конкретной книги.
- **Ответ:** Список объектов `Sentence` с полями `id`, `text`, `audio`, `translate` и `book`.

### Избранные книги

#### Получить все избранные книги
- **URL:** `/api/favoriteBooks/`
- **Метод:** `GET`
- **Описание:** Получить список всех избранных книг для авторизованного пользователя.
- **Ответ:** Список объектов `FavoriteBook`.

#### Добавить книгу в избранное
- **URL:** `/api/favoriteBooks/`
- **Метод:** `POST`
- **Описание:** Добавить книгу в избранное пользователя.
- **Тело запроса:**
  - `book`: ID книги для добавления в избранное.
- **Ответ:** Созданный объект `FavoriteBook`.

#### Удалить книгу из избранного
- **URL:** `/api/favoriteBooks/{id}/`
- **Метод:** `DELETE`
- **Описание:** Удалить книгу из избранного пользователя.
- **Ответ:** HTTP 204 No Content.

#### Проверить, есть ли книга в избранном
- **URL:** `/api/favoriteBooks/check-favorite/`
- **Метод:** `GET`
- **Описание:** Проверить, есть ли конкретная книга в избранном у пользователя.
- **Параметры запроса:**
  - `book_id`: ID книги для проверки.
- **Ответ:** JSON-объект с полем `is_favorite` (булево значение).